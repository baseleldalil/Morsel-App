<div class="advanced-timing">
  <!-- Header -->
  <div class="timing-header" (click)="toggleExpanded()">
    <div class="header-title">
      <span class="header-icon">‚è±</span>
      <span>Advanced Timing</span>
    </div>
    <span class="expand-icon">{{ isExpanded ? '‚ñ≤' : '‚ñº' }}</span>
  </div>

  @if (isExpanded) {
    <div class="timing-content">
      <!-- Message Delays -->
      <div class="timing-section">
        <h4 class="section-title">
          <span class="section-icon">‚è≥</span>
          Message Delays
        </h4>
        <div class="inputs-row">
          <div class="input-group">
            <label>Min Delay - Min 30</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messageDelayMin"
                (input)="updateDelayMin($any($event.target).valueAsNumber)"
                (blur)="enforceDelayMin($any($event.target))"
                min="30"
              />
              <span class="unit">sec</span>
            </div>
          </div>
          <span class="range-arrow">‚Üî</span>
          <div class="input-group">
            <label>Max Delay - Min 60</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messageDelayMax"
                (input)="updateDelayMax($any($event.target).valueAsNumber)"
                (blur)="enforceDelayMax($any($event.target))"
                min="60"
              />
              <span class="unit">sec</span>
            </div>
          </div>
        </div>
        <div class="info-box">
          <span class="info-icon">‚Ñπ</span>
          Random delay between each message (minimum 30 seconds)
        </div>
      </div>

      <!-- Random Breaks (Always Enabled) -->
      <div class="timing-section">
        <h4 class="section-title">
          <span class="section-icon">üí¨</span>
          Random Breaks
          <span class="always-on-badge">Always On</span>
        </h4>

        <div class="inputs-row">
          <div class="input-group">
            <label>Min Messages</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messagesCountMin"
                (input)="updateMessagesMin($any($event.target).valueAsNumber)"
                min="1"
                max="35"
              />
              <span class="unit">msgs</span>
            </div>
          </div>
          <span class="range-arrow">‚Üî</span>
          <div class="input-group">
            <label>Max Messages - Max 35</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messagesCountMax"
                (input)="updateMessagesMax($any($event.target).valueAsNumber)"
                min="1"
                max="35"
              />
              <span class="unit">msgs</span>
            </div>
          </div>
        </div>

        <div class="inputs-row">
          <div class="input-group">
            <label>Min Duration - Min 3</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().breakDurationMin"
                (input)="updateBreakMin($any($event.target).valueAsNumber)"
                min="3"
              />
              <span class="unit">min</span>
            </div>
          </div>
          <span class="range-arrow">‚Üî</span>
          <div class="input-group">
            <label>Max Duration</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().breakDurationMax"
                (input)="updateBreakMax($any($event.target).valueAsNumber)"
                min="3"
              />
              <span class="unit">min</span>
            </div>
          </div>
        </div>

        <div class="info-box">
          <span class="info-icon">‚Ñπ</span>
          Random pause after a number of messages (maximum 35 messages)
        </div>
      </div>

    </div>
  }
</div>
