<div class="advanced-timing">
  <!-- Header -->
  <div class="timing-header" (click)="toggleExpanded()">
    <div class="header-title">
      <span class="header-icon">โฑ</span>
      <span>Advanced Timing</span>
      <span class="header-arabic">ุฅุนุฏุงุฏุงุช ุงูุชูููุช ุงููุชูุฏูุฉ</span>
    </div>
    <span class="expand-icon">{{ isExpanded ? 'โฒ' : 'โผ' }}</span>
  </div>

  @if (isExpanded) {
    <div class="timing-content">
      <!-- Message Delays -->
      <div class="timing-section">
        <h4 class="section-title">
          <span class="section-icon">โณ</span>
          Message Delays
          <span class="section-arabic">ุงูุชุฃุฎูุฑ ุจูู ุงูุฑุณุงุฆู</span>
        </h4>
        <div class="inputs-row">
          <div class="input-group">
            <label>Min (ุงูุญุฏ ุงูุฃุฏูู) - Min 30</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messageDelayMin"
                (input)="updateDelayMin($any($event.target).valueAsNumber)"
                min="30"
              />
              <span class="unit">ุซุงููุฉ</span>
            </div>
          </div>
          <span class="range-arrow">โ</span>
          <div class="input-group">
            <label>Max (ุงูุญุฏ ุงูุฃูุตู)</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messageDelayMax"
                (input)="updateDelayMax($any($event.target).valueAsNumber)"
                min="30"
              />
              <span class="unit">ุซุงููุฉ</span>
            </div>
          </div>
        </div>
        <div class="info-box">
          <span class="info-icon">โน</span>
          ุงูุชุฃุฎูุฑ ุงูุนุดูุงุฆู ุจูู ูู ุฑุณุงูุฉ (ุงูุญุฏ ุงูุฃุฏูู 30 ุซุงููุฉ)
        </div>
      </div>

      <!-- Random Breaks (Always Enabled) -->
      <div class="timing-section">
        <h4 class="section-title">
          <span class="section-icon">๐ฌ</span>
          Random Breaks
          <span class="section-arabic">ูุชุฑุงุช ุงูุฑุงุญุฉ ุงูุนุดูุงุฆูุฉ</span>
          <span class="always-on-badge">Always On</span>
        </h4>

        <div class="inputs-row">
          <div class="input-group">
            <label>Min (ุนุฏุฏ ุงูุฑุณุงุฆู)</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messagesCountMin"
                (input)="updateMessagesMin($any($event.target).valueAsNumber)"
                min="1"
              />
              <span class="unit">ุฑุณุงูุฉ</span>
            </div>
          </div>
          <span class="range-arrow">โ</span>
          <div class="input-group">
            <label>Max (ุนุฏุฏ ุงูุฑุณุงุฆู) - Max 35</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().messagesCountMax"
                (input)="updateMessagesMax($any($event.target).valueAsNumber)"
                min="1"
                max="35"
              />
              <span class="unit">ุฑุณุงูุฉ</span>
            </div>
          </div>
        </div>

        <div class="inputs-row">
          <div class="input-group">
            <label>Min (ูุฏุฉ ุงูุฑุงุญุฉ) - Min 3</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().breakDurationMin"
                (input)="updateBreakMin($any($event.target).valueAsNumber)"
                min="3"
              />
              <span class="unit">ุฏูููุฉ</span>
            </div>
          </div>
          <span class="range-arrow">โ</span>
          <div class="input-group">
            <label>Max (ูุฏุฉ ุงูุฑุงุญุฉ)</label>
            <div class="input-with-unit">
              <input
                type="number"
                [value]="timing().breakDurationMax"
                (input)="updateBreakMax($any($event.target).valueAsNumber)"
                min="3"
              />
              <span class="unit">ุฏูููุฉ</span>
            </div>
          </div>
        </div>

        <div class="info-box">
          <span class="info-icon">โน</span>
          ุชููู ุนุดูุงุฆู ุจุนุฏ ุนุฏุฏ ูู ุงูุฑุณุงุฆู (ุงูุญุฏ ุงูุฃูุตู 35 ุฑุณุงูุฉ)
        </div>
      </div>

      <!-- Advanced Options (Always Enabled) -->
      <div class="timing-section">
        <h4 class="section-title">
          <span class="section-icon">โ๏ธ</span>
          Decimal Random
          <span class="section-arabic">ุนุดูุงุฆูุฉ ุนุดุฑูุฉ</span>
          <span class="always-on-badge">Always On</span>
        </h4>

        <div class="precision-row">
          <div class="precision-select">
            <label>Precision (ุงูุฏูุฉ)</label>
            <select
              [value]="timing().precision"
              (change)="updatePrecision($any($event.target).value)"
            >
              @for (opt of precisionOptions; track opt) {
                <option [value]="opt">{{ opt }}</option>
              }
            </select>
          </div>
        </div>

        <div class="info-box">
          <span class="info-icon">โน</span>
          ุชูููุฏ ุฃุฑูุงู ุนุดูุงุฆูุฉ ุญููููุฉ ุบูุฑ ูุชููุนุฉ (ูุซุงู: 32.7 ุจุฏูุงู ูู 32 ุฃู 33)
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="btn btn-primary" (click)="saveSettings()">
          ๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช
        </button>
        <button class="btn btn-outline" (click)="resetSettings()">
          ๐ ุฅุนุงุฏุฉ ุชุนููู
        </button>
        <button class="btn btn-outline" (click)="refreshSettings()">
          ๐ ุชุญุฏูุซ
        </button>
      </div>
    </div>
  }
</div>
